.header
  position relative
  top 0
  left 0
  width 100%
  z-index 100
  max-height $header-height
  height $header-height
  margin-bottom 70px
  border-bottom 2px solid transparent
  will-change backdrop-filter
  backdrop-filter blur(0.5px) // Minimal initial blur
  background-color rgba(255, 255, 255, 0)
  transition border-bottom 0.2s ease-in-out,
             backdrop-filter 0.2s ease-in-out,
             background-color 0.2s ease-in-out

  &::before
    content ' '
    background no-repeat url($background-img) $background-color
    background-size cover
    height $header-height
    width 100vw
    z-index -1
    position absolute
    top 0
    opacity 0
    transition opacity 0.2s ease-in-out

  .header-content
    margin 0 $margin-wide
    display flex
    flex-direction: column
    align-items center
    // justify-content space-between
    gap 1rem
    height 100%;

  .header-top
    display: flex
    align-items: center
    gap: 1rem
    width: 100%

  .header-logo
    flex-shrink: 0 
    position relative
    height $header-logo-size
    width $header-logo-size
    z-index 10
    transition height 1s ease-in-out,
               width 1s ease-in-out,
               z-index 1s ease-in-out

    a
      display inline-block
      height $header-logo-size
      width $header-logo-size

    img
      height $header-logo-size
      width $header-logo-size
      margin 0 auto
      padding 3px
      border solid 5px $emphasis-color
      border-radius 100%

  .header-title
    position relative
    font-family $title-font-family
    font-size 45pt
    transition font-size 1s ease-in-out
    margin-right auto

  .header-nav
    position relative
    top -25px
    left auto
    width 100%
    text-align center
    margin-left: 0
    transform: translateX(0)
    transition: margin-left 0.3s ease-in-out,
                transform 0.3s ease-in-out,
                top 0.3s ease-in-out
    ul
      display flex
      align-items center
      justify-content center
      list-style none
      margin 0
      padding 0

      li
        padding 0
        color $font-color
        font-family $header-font-family

        a
          margin 0 0 0 0.5rem 
          text-decoration none
          transition scale 0.2s ease-in-out

          &:hover
            color $emphasis-color
            text-decoration none
            transform scale(1.3)
  
  .header-nav-separator
    margin 0 0 0 0.5rem

html:not([data-scroll='0'])
  .header
    position sticky
    backdrop-filter blur(60px)
    background-color rgba(255, 255, 255, 0.5)
    border-bottom 2px solid $emphasis-color
    margin-bottom 40px

    &::before
      background no-repeat url($background-img) $background-color
      background-size cover
      content ' '
      opacity 0.3
      position absolute
      top 0

  .header-content
    padding 0
    flex-direction row
    align-items initial

  .header-logo
    height $header-logo-size-small
    width $header-logo-size-small

    a
      height $header-logo-size-small
      width $header-logo-size-small

    img
      height $header-logo-size-small
      width $header-logo-size-small
      margin 0 auto
      padding 2px
      border-radius 20%

  .header-title
    font-size 30pt

  .header-nav
    margin-left auto
    position relative
    top 32px
    height fit-content
    transform: translateX(0)
    transition: margin-left 0.3s ease-in-out,
                transform 0.3s ease-in-out,
                top 0.3s ease-in-out
    ul
      display flex
      align-items center
      justify-content flex-end
      list-style none
      margin 0
      padding 0

// Mobile menu styles
@media screen and (max-width: 768px)

  html,
  html:not([data-scroll='0'])

    .header
      position sticky
      backdrop-filter blur(60px)
      background-color rgba(255, 255, 255, 0.5)
      border-bottom 2px solid $emphasis-color
      margin-bottom 40px

      &::before
        background no-repeat url($background-img) $background-color
        background-size cover
        content ' '
        opacity 0.3
        position absolute
        top 0

      .header-content
        margin: 0
        width: 100%
        display: flex
        flex-direction: row
        align-items: baseline
        justify-content: space-between

      .header-top
        display: flex
        align-items: center
        gap: 1rem
        flex: 1

      .header-logo
        position: relative
        top: -25px
        left: -25px

      .header-logo,
      .header-logo a,
      .header-logo img
        height: $header-logo-size
        width: $header-logo-size
        border-radius 100%

      .header-title
        font-size 30pt
        top -20px
        margin-right 0

      .header-nav
        display none // Hide regular nav
        position fixed
        top $header-height
        left 0
        right 0
        background rgba(255, 255, 255, 0.95)
        padding 1rem
        z-index 100
        
        &.is-active
          display block
          
        ul
          flex-direction column
          gap 1rem
          
          li
            width 100%
            text-align center
            
            a
              display block
              padding 0.5rem

      .hamburger-wrapper
        position: relative
        margin: 0 20px;
        height: 30px;
        top: -32px;

      .hamburger
        display: block
        position: relative
        width: 30px
        height: 30px
        cursor: pointer
        z-index: 101
        
        span
          display block
          position absolute
          height 3px
          width 100%
          background $font-color
          border-radius 3px
          transition all 0.3s ease-in-out
          
          &:nth-child(1)
            top: 0
          
          &:nth-child(2)
            top: 10px
          
          &:nth-child(3)
            top: 20px
            
        &.is-active
          span
            &:nth-child(1)
              transform: rotate(45deg)
              top: 10px
              
            &:nth-child(2)
              opacity: 0
              
            &:nth-child(3)
              transform: rotate(-45deg)
              top: 10px

  // Disable hader animations on mobile
    // .header
    //   .header-title
    //     font-size 30pt
    //   .header-logo,
    //   .header-logo a,
    //   .header-logo img
    //     height $header-logo-size
    //     width $header-logo-size
    //     border-radius 100%
    //   .header-content
    //     flex-direction row
    //     align-items: baseline

